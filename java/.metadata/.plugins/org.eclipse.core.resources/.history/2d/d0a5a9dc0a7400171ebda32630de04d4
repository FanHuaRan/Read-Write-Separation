package com.fhr.readwritedemo.services.impl;

import java.io.File;
import java.io.IOException;
import java.util.List;

import org.apache.commons.io.FileUtils;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import com.fhr.readwritedemo.gloable.GloableConfig;
import com.fhr.readwritedemo.models.DataBaseInfo;
import com.fhr.readwritedemo.models.DataBaseModel;
import com.fhr.readwritedemo.services.IDataBaseInfoService;
/**
 * 数据库信息服务实现
 * @author fhr
 * @date 2017/07/29
 */
public class DataBaseInfoServiceImpl implements IDataBaseInfoService {
	private static final Logger logger=Logger.getLogger(DataBaseInitialServiceImpl.class);

	@Autowired
	private GloableConfig gloableConfig=null;
	
	@Override
	public List<DataBaseInfo> getDataBaseInfos() {
		File configFile=new File(gloableConfig.getDatabaseConfigFile());
		if(!configFile.exists()){
			logger.error("数据库配置文件不存在");
			return null;
		}
		try {
			String dataBaseConfigStr=FileUtils.readFileToString(configFile);
			JSONArray jsonArray=JSONArray.parseArray(dataBaseConfigStr);
			List<DataBaseInfo> 
			
			for(Object value :jsonArray){
				JSONObject jsonObject=(JSONObject)value;
				
			}
		} catch (IOException e) {
			e.printStackTrace();
		}	}
	
	
}
