package com.fhr.osmonitor.components;

import java.io.IOException;
import java.util.Properties;

import org.apache.commons.lang.StringUtils;
import org.apache.log4j.Logger;

import com.fhr.osmonitor.utils.PropertiesUtil;

/**
 * 监听配置对象
 * @author fhr
 * @date 2017/07/26
 */
public class MonitorConfig {
	
	private static final Logger logger=Logger.getLogger(MonitorConfig.class);
	
	//监听间隔 以秒为单位 缺省为1
	public static final int MONIT_INTERVAL;
	
	//端口 缺省为14080
	public static final int MONIT_SOCKET_PORT;
	
	static{
	 	int interval=1;
	 	int port=14080;
	 	try {
		 	String configFile=Thread.currentThread().getContextClassLoader().getResource("/monitorconfig.properties").getFile();
	 		Properties properties=PropertiesUtil.getPropertiesObj(configFile);
	 		String monitorInterval=PropertiesUtil.getProperty(properties,"monit.interval");
			if(StringUtils.isNotEmpty(monitorInterval)&&StringUtils.isNumeric(monitorInterval)){
				MONIT_INTERVAL=Integer.valueOf(monitorInterval);
			}else{
				MONIT_INTERVAL=1;
			}
			String sokertPort=PropertiesUtil.getProperty(properties,"monit.socketport");
			if(StringUtils.isNotEmpty(sokertPort)&&StringUtils.isNumeric(sokertPort)){
				MONIT_SOCKET_PORT=Integer.valueOf(monitorInterval);
			}else{
				MONIT_SOCKET_PORT=14080;
			}
	 	}
		catch (IOException e) {
			e.printStackTrace();
			logger.error("配置文件读取错误", e);
		}
	 		MONIT_INTERVAL=interval;
			MONIT_SOCKET_PORT=port;
	}
}
