package com.fhr.readwritedemo.utils;

import java.util.Iterator;
import java.util.Map;
import java.util.Random;
import java.util.Set;

/**
 * 随机算法辅助工具
 * @author fhr
 * @since 2017/08/01
 */
public class RandomAloUtils {
	// 加权随机
	public static String weightedRandom(Map<String,Integer> source) {
		if(source == null || source.isEmpty()) {
			return null;  
		}
		Integer sum = 0;  
		//先求和
		source.entrySet().stream().
        Set<Map.Entry<String, Integer>> entrySet = source.entrySet();  
        Iterator<Map.Entry<String, Integer>> iterator = entrySet.iterator();  
        while(iterator.hasNext()){  
            sum += iterator.next().getValue();  
        }  
        Integer rand = (int) (new Random().nextInt(sum) + 1);  
        for(Map.Entry<String, Integer> entry : entrySet){  
            rand -= entry.getValue();  
            if(rand <=0){  
                return entry.getKey();  
            }  
        }  
        return null; 
	}
}
